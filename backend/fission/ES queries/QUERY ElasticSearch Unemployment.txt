{
  "size": 0,
  "_source": {"includes": ['lga_code_2021_asgs', 'dec_10', 'dec_11', 'dec_12', 'dec_13', 'dec_14', 'dec_15', 'dec_16', 'dec_17', 'dec_18', 'dec_19', 'dec_20', 'jun_11', 'jun_12', 'jun_13', 'jun_14', 'jun_15', 'jun_16', 'jun_17', 'jun_18', 'jun_19', 'jun_20', 'jun_21', 'mar_11', 'mar_12', 'mar_13', 'mar_14', 'mar_15', 'mar_16', 'mar_17', 'mar_18', 'mar_19', 'mar_20', 'mar_21', 'sep_11', 'sep_12', 'sep_13', 'sep_14', 'sep_15', 'sep_16', 'sep_17', 'sep_18', 'sep_19', 'sep_20', 'sep_21']},
  "query": {
    "bool": {
      "must_not": {
        "script": {
          "source": "for (field in doc.keySet()) { if (Double.isNaN(doc[field].value)) { return true; } } return false;",
        }
      }
    }
  },
  "aggs": {
    "State": {
      "terms": {
        "script": {
          "source": "doc['lga_code_2021_asgs'].value in ['11300', '11750', '14000', '14750', '17200', '10650', '10850', '11500', '11700', '15990', '11520', '12930', '13340', '14300', '17150', '18200', '12900', '14170', '14500', '15350', '11150', '12000', '15700', '14700', '15300', '15850', '17650', '11600', '13010', '15270', '15520', '10180', '11800', '12380', '10600', '14550', '17000', '17350', '17950', '11450', '11730', '15800', '16610', '17640', '10800', '15750', '16350', '17080', '18450', '14350', '14920', '16100', '18400', '12730', '13800', '15650', '16400', '17850', '10900', '13310', '14850', '15240', '10300', '12750', '12850', '16200', '16380', '18500', '10550', '10950', '15950', '18020', '18710', '19399', '12870', '16150', '16550', '11350', '10500', '10750', '11650', '14650', '17100', '17400', '12700', '13660', '16900', '16950', '12350', '15560', '17750', '18100', '11570', '12950', '14870', '14900', '15050', '18350', '11720', '12160', '14100', '14950', '17550', '11400', '14220', '14600', '16260', '16490', '17040', '17900', '18050', '10470', '12390', '13850', '13550', '17310', '17420', '10250', '11200', '12150', '13910', '10050', '11250', '13450', '14400', '15900', '16700', '17620', '18250'] ? 'New South Wales' : doc['lga_code_2021_asgs'].value in ['22670', '22910', '24410', '24850', '21750', '22110', '25990', '20910', '22750', '24650', '26350', '22250', '23350', '26610', '20830', '21110', '25250', '24210', '26080', '26260', '27450', '23670', '26170', '23430', '24600', '24900', '26670', '22980', '25150', '27070', '29399', '21890', '26430', '20740', '21670', '27170', '20110', '22310', '25620', '21370', '21610', '22170', '25490', '26700', '21830', '23940', '24780', '24970', '25340', '23190', '25060', '25810', '21270', '24130', '26730', '26890', '21450', '22620', '23810', '26490', '21180', '25710', '20570', '23110', '23270', '26810', '27260', '21010', '27630', '22490', '22830', '20260', '22410', '25430', '25900', '27350', '26980', '20660', '24250', '24330'] ? 'Victoria' : doc['lga_code_2021_asgs'].value in ['33620', '35670', '36660', '30410', '31750', '33360', '34530', '34580', '37550', '30370', '33100', '34830', '35300', '37600', '32270', '32310', '35800', '31900', '32080', '34570', '31000', '32500', '33610', '34800', '36950', '30250', '30900', '35760', '30760', '33980', '34860', '36720', '37400', '37570', '30300', '34420', '35250', '36960', '32260', '32810', '31820', '32770', '33800', '30450', '35780', '36580', '34590', '34710', '34880', '35010', '32250', '35600', '36070', '36370', '37300', '37310', '32450', '33960', '35790', '36910', '33830', '36510', '33430', '36300', '32330', '35740', '36820', '31950', '32750', '34770', '36150', '36630', '37340', '32600', '33200', '33220', '36250', '37010'] ? 'Queensland' : doc['lga_code_2021_asgs'].value in ['40120', '43360', '43710', '45120', '46090', '47290', '40310', '41750', '45040', '47700', '40070', '43220', '44000', '45400', '46670', '47980', '40250', '46970', '47630', '48830', '40430', '47910', '49399', '40520', '46300', '47140', '41010', '41330', '45090', '45290', '41960', '43080', '48130', '44340', '46860', '48640', '41060', '41560', '45890', '44620', '40150', '42750', '48050', '44550', '41140', '41190', '41830', '42600', '43790', '44830', '48260', '43650', '45340', '40220', '40910', '45540', '45680', '46450', '48540', '42030', '42110', '42250', '44210', '40700', '46510', '47490', '48410', '48750', '44060', '47800', '48340'] ? 'South Australia' : doc['lga_code_2021_asgs'].value in ['53430', '54620', '55950', '56230', '59360', '52800', '53570', '55600', '57840', '50840', '51310', '56160', '56300', '56460', '57910', '59310', '50350', '52030', '52730', '53990', '55180', '55530', '55810', '54060', '54690', '54830', '55320', '53640', '56930', '55250', '59030', '50210', '51400', '53010', '54310', '54340', '55110', '55740', '50980', '51120', '52380', '57140', '57210', '57490', '51330', '52100', '52450', '56370', '59340', '51960', '54760', '57000', '57280', '58400', '59170', '59330', '53920', '50490', '56790', '58050', '59350', '51750', '53290', '54130', '58260', '58890', '53080', '58540', '51540', '51610', '55670', '56090', '58190', '58760', '52520', '53360', '54900', '55390', '56620', '56730', '51470', '53780', '54480', '56860', '58330', '58680', '59100', '52170', '53710', '50770', '51680', '52240', '52660', '55880', '57080', '57770', '58570', '58610', '58820', '59250', '59370', '51260', '58510', '50420', '51190', '54170', '57350', '50560', '54200', '54970', '50910', '51820', '57980', '50080', '54280', '54410', '57700', '50630', '52310', '52590', '53150', '53220', '57420', '57630', '50280', '52870', '53800', '54550', '55040', '55460', '56580', '58470', '50250', '51080', '51890', '52940', '59320'] ? 'Western Australia' : doc['lga_code_2021_asgs'].value in ['64010', '60210', '60410', '61010', '65010', '62210', '61210', '63010', '64610', '63210', '61410', '61510', '61610', '62010', '63410', '65610', '64810', '60810', '61810', '62410', '64210', '63610', '63810', '65210', '62810', '60610', '62610', '65410', '65810'] ? 'Tasmania' : doc['lga_code_2021_asgs'].value in ['70620', '71000', '73600', '79399', '74550', '70200', '72800', '74050', '72330', '70420', '70540', '72200', '74660', '71150', '74680', '70700', '72300', '71300', '74560'] ? 'Northern Territory' : doc['lga_code_2021_asgs'].value in ['89399'] ? 'Australian Capital Territory'"
        }
      },
      "aggs": {
        "State": {
          "sum": { "field": "value" }
        }
      }
    }
  }
}